---
problem_id: 10170
title: The Hotel with Infinite Rooms
cpe_rank: 1
exam_dates:
  - 2012-09-25 
exam_numbers:
  - "2"
Algo/Data: []
Ad_Hoc:
  - Finding (Simple) Formula (or Pattern), Easier
Topic:
  - Mathematic
solved: 0
---
# Reference

- 舊版本無 CPE 頁面保存
- [e555. 10170 - The Hotel with Infinite Rooms - 高中生程式解題系統](https://zerojudge.tw/ShowProblem?problemid=e555)
- https://onlinejudge.org/external/101/10170.pdf
- https://vjudge.net/problem/UVA-10170

# 題解

## 輔助

畫一張流程圖後，即會比較好理解。

> [!note]
> 
> - yellow: $\color{yellow}{S}$
> - blue: $\color{blue}{D}$
> - red: output $\color{red}{\text{？}}$
>
> ![[10170.png]]

> [!tip]
> - 仔細看題目數字，需要使用 `long long`
> 
> | Method              | $\color{Lime}{\text{AC}}$ | Time Complexity |
> | ------------------- | ------------------------- | --------------- |
> | brute force `while` | 50 ms                     | $O (\sqrt{ D })$  |
> | close form          |  0 ms                        |  $O (1)$                |

---

## 分析（公式解）

> - 等差級數（Arithmetic Series） $\displaystyle{S_{n}=\frac{n(a_{1}+a_{n})}{2}}$ 或 $\displaystyle{S_{n}=\frac{n[2a_{1}+(n-1)d]}{2}}$
> - 第 $n$ 項： $a_{n}=a_{1}+(n-1)d$

假設等差數列：$a_{1} = \color{yellow}{S}$, $a_{k} = \color{red}{\text{？}}$, $d = 1$

尋找一個最小的 $k$ ，使得等差數列級數和

$$
S_{k} = \frac{k \cdot[2{\color{yellow}{S}}+ (k-1)]}{2} \geq \color{blue}{D}
$$

展開後得到 $k$ 的二次式：

$$
k^{2} \cdot(2{\color{yellow}{S}}-1)k - 2{\color{blue}{D}} \geq 0 
$$

公式解取正根，向上取整即是 min. integer $k$

$$
k = \left\lceil  \frac{-(2S-1) + \sqrt{ (2S-1)^{2} + 8D}}{2}  \right\rceil 
$$

題目是求 $\displaystyle{a_{k}= S + k - 1}$

# I/O

## CPE 1

### I

```
1 6
3 10
3 14
1 1000
10 1000
333 32777
555 46345
1234 123456789012345
5566 183183183183183
9898 989898989898989
10000 999999999999999
5 4
5 5
5 6
5 7
```

### O

```
3
5
6
45
46
420
633
15713484
19140700
44494922
44721361
5
5
6
6
```

## CPE 2

### I

```
1 7
4 15
4 18
2 2000
20 2000
555 32345
666 46369
4321 543210123456789
7879 789789789789789
10000 999999999999999
8989 898989898989898
7 6
7 7
7 8
7 9
```

### O

```
4
6
7
63
66
610
732
32960890
39743926
44721361
42402593
7
7
8
8
```