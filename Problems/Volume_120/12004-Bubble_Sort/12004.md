---
problem_id: 12004
title: Bubble Sort
cpe_rank:
exam_dates: []
exam_numbers: []
Algo/Data:
  - Bubble_sort
Ad_Hoc:
  - Finding (Simple) Formula (or Pattern), Easier
Topic:
  - Mathematic
solved: 1
---
# Reference

- [m298. 12004 - Bubble Sort - 高中生程式解題系統](https://zerojudge.tw/ShowProblem?problemid=m298)
- https://onlinejudge.org/external/120/12004.pdf
- https://vjudge.net/problem/UVA-12004


有關 bubble sort 討論
- [algorithm - Average number of swaps performed in Bubble Sort - Stack Overflow](https://stackoverflow.com/questions/45322531/average-number-of-swaps-performed-in-bubble-sort)

# 題解

> [!tip]
> -  注意輸出格式，要分開是否整除
> - 使用 `long long`
> 
> | Method     | $\color{Lime}{\text{AC}}$ | Time Complexity |
> | ---------- | ------------------------- | --------------- |
> | close form | 0 ms                      | $O (1)$         |


### KEY

在 Bubble Sort 中，**任意兩個元素最多只會被交換一次**。為什麼？

因為一旦 $a$ 跨過 $b$（兩者相鄰且交換），之後它們的相對順序就固定了，不會再對調。

---

比如從 $n$ 個元素中任取兩個，例如值為 $p$ 和 $q$（$p < q$）：

- 若 $p$ 在 $q$ 前面 → **不會**被交換
- 若 $p$ 在 $q$ 後面 → **一定會**被交換（某次相鄰時會觸發）

**隨機排列下**，兩者誰在前面機率各 $\displaystyle{\frac{1}{2}}$，所以：

$$P(\text{這對被交換}) = \frac{1}{2}$$

| 情況            | 交換次數                              |
| ------------- | --------------------------------- |
| Worst case    | $\displaystyle{\frac{n(n-1)}{2}}$ |
| Best case     | $0$                               |
| Expected case | $\displaystyle{\frac{n(n-1)}{4}}$ |

---

共有 $\dbinom{n}{2} = \dfrac{n(n-1)}{2}$ 對，預期交換次數為：

$$E[\text{總交換次數}] = \frac{n(n-1)}{2} \times \frac{1}{2} = \frac{n(n-1)}{4}$$

---


# I/O

### I

```
10
1
2
3
4
5
6
7
8
9
10
```

### O

```
Case 1: 0
Case 2: 1/2
Case 3: 3/2
Case 4: 3
Case 5: 5
Case 6: 15/2
Case 7: 21/2
Case 8: 14
Case 9: 18
Case 10: 45/2
```