# 11581 - Grid Successors

Consider a $3 \times 3$ grid of numbers $g$ where each cell contains either a `0` or a `1`. We define a function $f$ that transforms such a grid: each cell of the grid $f(g)$ is the sum (modulo 2) of its adjacent cells in $g$ (two cells are considered adjacent if and only if they share a common side).

Furthermore, we define $f^{(i)}(g)$ recursively  
$f^{(0)}(g) = g$ and  
$f^{(i+1)}(g) = f(f^{(i)}(g))$ (where $i \ge 0$).

Finally, for any grid $h$, let $k_g(h)$ be the number of indices $i$ such that  
$$  
h = f^{(i)}(g)  
$$  
(we may have $k_g(h) = \infty$).

Given a grid $g$, your task is to compute the greatest index $i$ such that  
$$  
k_g(f^{(i)}(g))  
$$  
is finite.

---

# 中文翻譯

考慮一個 $3 \times 3$ 的數字方格 $g$，其中每個格子包含 `0` 或 `1`。我們定義一個函數 $f$ 來轉換此方格：在新方格 $f(g)$ 中，每個格子的值等於原方格中與其**相鄰（共邊）**格子的數值總和（對 2 取模）。

此外，我們遞迴定義 $f^{(i)}(g)$：  
$f^{(0)}(g) = g$，  
$f^{(i+1)}(g) = f(f^{(i)}(g))$（其中 $i \ge 0$）。

最後，對於任意方格 $h$，定義 $k_g(h)$ 為滿足  
$$  
h = f^{(i)}(g)  
$$  
的索引 $i$ 的數量（可能有 $k_g(h) = \infty$）。

給定一個方格 $g$，你的任務是求出最大的索引 $i$，使得  
$$  
k_g(f^{(i)}(g))  
$$  
為有限值。

---

## Input

Input begins with the number of test cases on its own line. Each case consists of a blank line followed by three lines of three characters, each either `1` or `0`. The $j$’th character of the $i$’th row of the test case is the value in the $j$’th cell of the $i$’th row of the grid $g$.

---

## 中文翻譯 — 輸入格式

第一行為測資的筆數。每一筆測資包含一個空行，接著三行，每行三個字元，每個字元為 `1` 或 `0`。第 $i$ 行第 $j$ 個字元代表方格 $g$ 中第 $i$ 列第 $j$ 行的數值。

---

## Output

For each test case, output the greatest index $i$ such that $k_g(f^{(i)}(g))$ is finite.

If there is no such index, output `-1`.

---

## 中文翻譯 — 輸出格式

對於每筆測資，輸出最大的索引 $i$，使得 $k_g(f^{(i)}(g))$ 為有限值。

若不存在這樣的索引，請輸出 `-1`。